# ğŸ¼ Arquitetura do Conductor - Diagrama Visual

## Como eu vejo a arquitetura atual:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CAMADA DE INTERFACE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   admin.py      â”‚    â”‚   agent.py      â”‚    â”‚  conductor.py   â”‚            â”‚
â”‚  â”‚ (Meta-agents)   â”‚    â”‚ (Project agents)â”‚    â”‚  (Futuro CLI)   â”‚            â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚            â”‚
â”‚  â”‚ â€¢ AgentCreator  â”‚    â”‚ â€¢ KotlinEntity  â”‚    â”‚ â€¢ CLI Unificado â”‚            â”‚
â”‚  â”‚ â€¢ Migrator      â”‚    â”‚ â€¢ TestGenerator â”‚    â”‚ â€¢ API REST      â”‚            â”‚
â”‚  â”‚ â€¢ HelpSystem    â”‚    â”‚ â€¢ ProblemRefinerâ”‚    â”‚ â€¢ Web UI        â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                                 â”‚
â”‚  Nota: Todos os agentes sÃ£o armazenados em .conductor_workspace/agents/        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            CAMADA DE SERVIÃ‡O (CORE)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        ConductorService                                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚   TaskDTO       â”‚  â”‚  AgentExecutor  â”‚  â”‚  TaskResultDTO  â”‚        â”‚   â”‚
â”‚  â”‚  â”‚   (Input)       â”‚  â”‚   (Execution)   â”‚  â”‚   (Output)      â”‚        â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ agent_id      â”‚  â”‚ â€¢ LLM Client    â”‚  â”‚ â€¢ status        â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ user_input    â”‚  â”‚ â€¢ Tools         â”‚  â”‚ â€¢ output        â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ context       â”‚  â”‚ â€¢ Prompt Engine â”‚  â”‚ â€¢ metadata      â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CAMADA DE INFRAESTRUTURA                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Repositories  â”‚  â”‚   LLM Clients   â”‚  â”‚   Tools System  â”‚  â”‚   Storage   â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚FileSystem   â”‚ â”‚  â”‚ â”‚Claude CLI   â”‚ â”‚  â”‚ â”‚Core Tools   â”‚ â”‚  â”‚ â”‚Session  â”‚ â”‚ â”‚
â”‚  â”‚ â”‚Repository   â”‚ â”‚  â”‚ â”‚Client       â”‚ â”‚  â”‚ â”‚             â”‚ â”‚  â”‚ â”‚JSON     â”‚ â”‚ â”‚
â”‚  â”‚ â”‚             â”‚ â”‚  â”‚ â”‚             â”‚ â”‚  â”‚ â”‚â€¢ FileOps    â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ load_def   â”‚ â”‚  â”‚ â”‚â€¢ send_promptâ”‚ â”‚  â”‚ â”‚â€¢ GitOps     â”‚ â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ â”‚â€¢ save_state â”‚ â”‚  â”‚ â”‚â€¢ stream     â”‚ â”‚  â”‚ â”‚â€¢ CodeGen    â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚â€¢ list_agentsâ”‚ â”‚  â”‚ â”‚â€¢ timeout    â”‚ â”‚  â”‚ â”‚â€¢ TestOps    â”‚ â”‚  â”‚ â”‚Knowledgeâ”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚JSON     â”‚ â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ â”‚MongoDB      â”‚ â”‚  â”‚ â”‚Gemini CLI   â”‚ â”‚  â”‚ â”‚Plugin Tools â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚Repository   â”‚ â”‚  â”‚ â”‚Client       â”‚ â”‚  â”‚ â”‚             â”‚ â”‚  â”‚ â”‚History  â”‚ â”‚ â”‚
â”‚  â”‚ â”‚             â”‚ â”‚  â”‚ â”‚             â”‚ â”‚  â”‚ â”‚â€¢ Custom     â”‚ â”‚  â”‚ â”‚LOG      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ collectionsâ”‚ â”‚  â”‚ â”‚â€¢ API calls  â”‚ â”‚  â”‚ â”‚â€¢ Extensions â”‚ â”‚  â”‚ â”‚         â”‚ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ indexes    â”‚ â”‚  â”‚ â”‚â€¢ rate limit â”‚ â”‚  â”‚ â”‚â€¢ Integrationsâ”‚ â”‚  â”‚ â”‚â€¢ JSON   â”‚ â”‚ â”‚
â”‚  â”‚ â”‚â€¢ TTL        â”‚ â”‚  â”‚ â”‚â€¢ fallback   â”‚ â”‚  â”‚ â”‚â€¢ Workflows  â”‚ â”‚  â”‚ â”‚â€¢ Lines  â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CAMADA DE DADOS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    .conductor_workspace/                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                    agents/<agent_id>/                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚definition   â”‚ â”‚persona.md   â”‚ â”‚session.json â”‚ â”‚knowledge    â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚.yaml        â”‚ â”‚             â”‚ â”‚             â”‚ â”‚.json        â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚             â”‚ â”‚â€¢ InstruÃ§Ãµes â”‚ â”‚â€¢ Estado     â”‚ â”‚â€¢ MemÃ³ria    â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â€¢ Nome       â”‚ â”‚â€¢ Comportamentoâ”‚ â”‚â€¢ Contexto   â”‚ â”‚â€¢ Artefatos  â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â€¢ VersÃ£o     â”‚ â”‚â€¢ Capacidades â”‚ â”‚â€¢ Ferramentasâ”‚ â”‚â€¢ Metadados  â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â€¢ Tags       â”‚ â”‚â€¢ Exemplos    â”‚ â”‚â€¢ PermissÃµes â”‚ â”‚â€¢ HistÃ³rico  â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â€¢ Tools      â”‚ â”‚â€¢ LimitaÃ§Ãµes  â”‚ â”‚â€¢ Config     â”‚ â”‚â€¢ Aprendizadoâ”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚playbook.yamlâ”‚ â”‚history.log  â”‚                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚             â”‚ â”‚             â”‚                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â€¢ Best       â”‚ â”‚â€¢ ExecuÃ§Ãµes  â”‚                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Practices  â”‚ â”‚â€¢ Resultados â”‚                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â€¢ Anti       â”‚ â”‚â€¢ Timestamps â”‚                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Patterns   â”‚ â”‚â€¢ Git Hashes â”‚                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â€¢ Rules      â”‚ â”‚â€¢ Status     â”‚                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚â€¢ Guidelines â”‚ â”‚â€¢ Metadata   â”‚                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Fluxo de ExecuÃ§Ã£o Detalhado:

```
1. ğŸ‘¤ UsuÃ¡rio â†’ CLI (admin.py/agent.py)
   â”‚
   â–¼
2. ğŸ”§ CLI â†’ ConductorService.execute_task(TaskDTO)
   â”‚
   â–¼
3. ğŸ“‹ ConductorService â†’ Repository.load_definition(agent_id)
   â”‚
   â–¼
4. ğŸ› ï¸ ConductorService â†’ ToolLoader.load_tools()
   â”‚
   â–¼
5. ğŸ¤– ConductorService â†’ AgentExecutor(definition, llm_client, tools)
   â”‚
   â–¼
6. ğŸ’¬ AgentExecutor â†’ LLM Client (Claude/Gemini)
   â”‚
   â–¼
7. ğŸ”§ AgentExecutor â†’ Tools (se necessÃ¡rio)
   â”‚
   â–¼
8. ğŸ“Š AgentExecutor â†’ TaskResultDTO
   â”‚
   â–¼
9. ğŸ’¾ ConductorService â†’ Repository.save_state()
   â”‚
   â–¼
10. ğŸ‘¤ CLI â†’ UsuÃ¡rio (resultado)
```

## ğŸ¯ Componentes Principais:

### **Camada de Interface:**
- **admin.py**: Meta-agentes (criaÃ§Ã£o, migraÃ§Ã£o, help)
- **agent.py**: Agentes de projeto (desenvolvimento, testes)
- **conductor.py**: CLI unificado (futuro)

### **Camada de ServiÃ§o:**
- **ConductorService**: Orquestrador central
- **AgentExecutor**: Executor de tarefas
- **TaskDTO/ResultDTO**: TransferÃªncia de dados

### **Camada de Infraestrutura:**
- **Repositories**: PersistÃªncia (FileSystem/MongoDB)
- **LLM Clients**: ComunicaÃ§Ã£o com IA (Claude/Gemini)
- **Tools System**: Ferramentas core + plugins
- **Storage**: Gerenciamento de estado

### **Camada de Dados:**
- **definition.yaml**: Identidade do agente
- **persona.md**: Comportamento e instruÃ§Ãµes
- **session.json**: Estado volÃ¡til
- **knowledge.json**: MemÃ³ria semÃ¢ntica
- **playbook.yaml**: Regras e prÃ¡ticas
- **history.log**: Log de execuÃ§Ãµes

## ğŸ—ï¸ PrincÃ­pios Arquiteturais:

### âœ… **Pontos Fortes:**
- **SeparaÃ§Ã£o clara** de responsabilidades
- **InversÃ£o de dependÃªncia** via interfaces
- **Extensibilidade** atravÃ©s de plugins
- **Multi-provider** para LLMs
- **PersistÃªncia** evolutiva de estado

### âš ï¸ **Pontos de AtenÃ§Ã£o:**
- **ConductorService** faz muitas coisas (SRP)
- **Falta de cache** distribuÃ­do
- **Sem middleware** para cross-cutting concerns
- **ConcorrÃªncia limitada** (fila em memÃ³ria)

## ğŸš€ **ComparaÃ§Ã£o com Spring Framework:**

| Aspecto | Spring | Conductor |
|---------|--------|-----------|
| **IoC Container** | ApplicationContext | DIContainer |
| **Service Layer** | @Service | ConductorService |
| **Repository** | @Repository | IStateRepository |
| **Configuration** | application.yml | config.yaml |
| **Dependency Injection** | @Autowired | Constructor injection |
| **Interfaces** | Interfaces/Abstractions | Ports/Interfaces |

## ğŸ“Š **MÃ©tricas da Arquitetura:**

- **Linhas de cÃ³digo**: ~351K (1.084 arquivos Python)
- **DocumentaÃ§Ã£o**: 405 arquivos MD
- **Testes**: 32 unitÃ¡rios + 1 E2E
- **Agentes**: Ilimitados (extensÃ­vel)
- **LLM Providers**: 2 (Claude, Gemini)
- **Storage Backends**: 2 (FileSystem, MongoDB)

## ğŸ¯ **ConclusÃ£o:**

A arquitetura do Conductor Ã© **bem estruturada** e segue **padrÃµes comprovados** (similar ao Spring Framework), mas aplicados ao domÃ­nio especÃ­fico de **orquestraÃ§Ã£o de agentes de IA**. 

**Nota da Arquitetura: 8.5/10** - SÃ³lida, mas precisa de refinamentos para produÃ§Ã£o.
